{% extends "bigkiks/whiteecom/base.html" %}
{% load widget_tweaks %}
{% load i18n %}

{% block title %}{% trans "Manage Email Addresses" %}{% endblock %}

{% block content %}
<div class="flex justify-center items-center min-h-screen bg-gray-50 dark:bg-background-dark">
  <div class="w-full max-w-md space-y-8 bg-white dark:bg-gray-900 p-8 rounded-xl shadow-md">
    <div class="text-center">
      <h2 class="text-3xl font-bold tracking-tight">{% trans "Manage Email Addresses" %}</h2>
      <p class="mt-2 text-sm text-black/60 dark:text-white/60">
        {% trans "Add, remove, or set your primary email address." %}
      </p>
    </div>

    <form method="post" action="{% url 'account_email' %}" class="mt-8 space-y-6">
      {% csrf_token %}

      {% if messages %}
        <ul class="text-sm text-center">
          {% for message in messages %}
            <li class="text-{{ message.tags }}-600">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}

      <div class="space-y-2">
        <h3 class="font-semibold text-lg">{% trans "Your Email Addresses" %}</h3>
        {% if emails %}
          <ul class="space-y-2">
            {% for email in emails %}
              <li class="flex justify-between items-center border border-gray-200 dark:border-white/10 rounded-lg px-3 py-2">
                <span>{{ email.email }}</span>
                {% if email.primary %}
                  <span class="text-xs text-green-600 font-medium">{% trans "Primary" %}</span>
                {% else %}
                  <a href="{% url 'account_email' %}?action=remove&email={{ email.email|urlencode }}" 
                     class="text-sm text-red-500 hover:underline">
                    {% trans "Remove" %}
                  </a>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-sm text-gray-500">{% trans "No email addresses added." %}</p>
        {% endif %}
      </div>

      <div class="space-y-2">
        <h3 class="font-semibold text-lg">{% trans "Add New Email Address" %}</h3>
        <div>
          {{ form.email.label_tag }}
          {{ form.email|add_class:"relative block w-full appearance-none rounded-lg border border-black/10 dark:border-white/10 bg-white dark:bg-background-dark px-3 py-3 placeholder-black/50 dark:placeholder-white/50 focus:z-10 focus:border-primary focus:outline-none focus:ring-primary sm:text-sm" }}
          {{ form.email.errors }}
        </div>
      </div>

      <button type="submit" class="group relative flex w-full justify-center rounded-lg border border-transparent bg-primary py-3 px-4 text-sm font-bold text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-background-dark">
        {% trans "Add Email" %}
      </button>

      <a href="{% url 'home' %}" class="group relative flex w-full justify-center rounded-lg border border-transparent bg-gray-400 py-3 px-4 text-sm font-bold text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-background-dark">
        {% trans "Cancel" %}
      </a>
    </form>
  </div>
</div>
{% endblock %}
