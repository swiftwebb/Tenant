{% extends 'base.html' %}
{% block content %}

<div class="min-h-screen bg-gray-50 dark:bg-gray-900 py-10 px-4 sm:px-6 lg:px-10">
  <div class="max-w-4xl mx-auto">

    <!-- Title -->
    <h1 class="text-3xl md:text-5xl font-extrabold text-gray-900 dark:text-white text-center mb-4">
      {{ product.title }}
    </h1>

    <div class="text-center text-gray-500 dark:text-gray-400 text-sm">
      <span>{{ product.created_at|date:"F j, Y" }}</span> •
      <span class="capitalize">{{ product.cataegory|default:"Uncategorized" }}</span>
    </div>

    <!-- Thumbnail -->
    {% if product.thumbnail %}
    <div class="my-8">
      <img src="{{ product.thumbnail.url }}"
           class="w-full max-h-[450px] object-cover rounded-2xl shadow border border-gray-300 dark:border-gray-700"
           alt="{{ product.title }}">
    </div>
    {% endif %}

    <!-- Overview -->
    {% if product.overview %}
    <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-line mb-10 text-center">
      {{ product.overview }}
    </p>
    {% endif %}

    <!-- Blog Content -->
    <div class="prose prose-lg dark:prose-invert max-w-none text-slate-800 dark:text-slate-300 font-body leading-relaxed">
        {% for line in product.description.splitlines %}
        {% if line %}

            <p class="mt-3 mb-3">{{ line }}</p>

        {% endif %}
        {% endfor %}

    </div>



    <!-- Comments Section -->
    <div class="mt-14 border-t border-gray-300 dark:border-gray-700 pt-8">

        <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-6">Comments</h2>
  
        {% if product.comment.all %}
          <div class="space-y-4">
            {% for c in product.comment.all %}
            <div class="group p-5 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow">
              <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-2">
                    <p class="text-sm font-semibold text-gray-900 dark:text-white">
                      {{ c.name.username }}
                    </p>
                    <span class="text-xs text-gray-400 dark:text-gray-500">•</span>
                    <span class="text-xs text-gray-500 dark:text-gray-400">{{ c.created|date:"M d, Y" }}</span>
                  </div>
                  <p class="text-gray-700 dark:text-gray-300 leading-relaxed">{{ c.comment }}</p>
                </div>
                
                <a href="{% url 'customers:dashboard_delete_comment' c.pk %}" 
                   class="text-gray-400 hover:text-red-500 dark:text-gray-500 dark:hover:text-red-400"
                   title="Delete comment">
                  <span class="material-symbols-outlined text-xl">delete</span>
                </a>
              </div>
            </div>
            {% endfor %}
          </div>
        {% else %}
          <div class="text-center py-12">
            <span class="material-symbols-outlined text-5xl text-gray-300 dark:text-gray-600 mb-3">chat_bubble_outline</span>
            <p class="text-gray-500 dark:text-gray-400">No comments yet.</p>
          </div>
        {% endif %}
  
        <!-- Add Comment Form -->
  
  
      </div>
    <!-- Back Button -->
    <div class="mt-10 text-center">
      <a href="{% url 'customers:dashboard_Blog' %}"
         class="inline-flex items-center gap-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600
                text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-semibold shadow transition">
        <span class="material-symbols-outlined text-sm">arrow_back</span>
        Back
      </a>
    </div>

  </div>
</div>

{% endblock %}
