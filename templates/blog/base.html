{% load static %}

<!DOCTYPE html>
<html class="light" lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Minimalist Blog</title>

  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
    rel="stylesheet" />

  <style>
    .material-symbols-outlined {
      font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24;
    }
  </style>

  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#2b8cee",
            secondary: "#1e293b",
            "background-light": "#f8fafc",
            "background-dark": "#0d141c"
          },
          fontFamily: {
            display: ["Inter", "sans-serif"]
          },
          boxShadow: {
            card: "0 6px 20px rgba(0,0,0,0.06)",
            cardHover: "0 12px 28px rgba(0,0,0,0.12)",
            darkCard: "0 6px 20px rgba(0,0,0,0.3)"
          },
          borderRadius: {
            xl: "1rem",
            "2xl": "1.25rem",
            "3xl": "1.75rem"
          },
          transitionProperty: {
            'height': 'height'
          }
        }
      }
    }
  </script>
</head>

<body class="font-display bg-background-light dark:bg-background-dark text-slate-700 dark:text-slate-300">

    <div class="min-h-screen flex flex-col">
  
      <!-- HEADER -->
<!-- Header -->
<header class="sticky top-0 z-50 flex items-center justify-between border-b border-gray-200/80 dark:border-white/10 px-6 py-4 bg-white dark:bg-slate-900 shadow-sm">
  <div class="flex items-center gap-3">
    <div class="h-10 w-10 text-primary">
      <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
        <path d="M42.1739 20.1739L27.8261 5.82609..." fill="currentColor"></path>
      </svg>
    </div>
    <h2 class="text-lg font-bold text-gray-900 dark:text-white">Minimalist Blog</h2>
  </div>

  <!-- Desktop nav -->
  <nav class="hidden md:flex items-center gap-6">
    <a href="{% url 'hoom' %}" class="text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary">Home</a>
    <a href="{% url 'blogall' %}" class="text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary">Blog</a>
    <a href="{% url 'about' %}" class="text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary">About</a>
    <a href="{% url 'contact' %}" class="text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary">Contact</a>

  </nav>

  <!-- Desktop actions -->
  <div class="hidden md:flex items-center gap-3">
    <form action="{% url 'search' %}" class="hidden md:flex items-center bg-background-light dark:bg-gray-800 rounded-lg h-10 px-3">
      <span class="material-symbols-outlined text-gray-500 dark:text-gray-400">search</span>
      <input name="q" type="search"
             class="bg-transparent border-none focus:ring-0 text-sm text-gray-900 dark:text-white ml-2 placeholder:text-gray-500 dark:placeholder:text-gray-400"
             placeholder="Search..."/>
    </form>

    {% if request.user.is_authenticated %}
    <a href="{% url 'account_logout' %}" class="hidden md:flex items-center justify-center h-10 px-3 rounded-lg bg-background-light dark:bg-gray-800 text-sm font-semibold text-gray-900 dark:text-white hover:text-primary transition-colors">Logout</a>
  {% else %}
    <a href="{% url 'account_signup' %}" class="hidden md:flex items-center justify-center h-10 px-3 rounded-lg bg-background-light dark:bg-gray-800 text-sm font-semibold text-gray-900 dark:text-white hover:text-primary transition-colors">Signup</a>
    <a href="{% url 'account_login' %}" class="hidden md:flex items-center justify-center h-10 px-3 rounded-lg bg-background-light dark:bg-gray-800 text-sm font-semibold text-gray-900 dark:text-white hover:text-primary transition-colors">Login</a>
  {% endif %}
  </div>
  <!-- Mobile menu button -->
  <button id="menu-btn" class="md:hidden flex items-center justify-center p-2 text-gray-900 dark:text-white">
    <span class="material-symbols-outlined text-3xl">menu</span>
  </button>
</header>
<div id="menu-backdrop" class="hidden fixed inset-0 bg-black/50 z-30 md:hidden"></div>

<!-- Mobile Menu -->
{% comment %} <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-slate-900 border-b border-gray-200/80 dark:border-gray-700 px-6 py-4 space-y-3"> {% endcomment %}
  <div id="mobile-menu" class="hidden md:hidden fixed top-[73px] right-0 w-1/2 bg-white dark:bg-slate-900 border-l border-b border-gray-200/80 dark:border-gray-700 px-6 py-4 space-y-3 shadow-lg z-40">
 
  <a href="{% url 'hoom' %}" class="mb-5 block text-sm font-medium text-gray-900 dark:text-white hover:text-primary">Home</a>
  <a href="{% url 'blogall' %}" class="block text-sm font-medium text-gray-900 dark:text-white hover:text-primary">Blog</a>
  <a href="{% url 'about' %}" class="mt-5 mb-5 block text-sm font-medium text-gray-900 dark:text-white hover:text-primary">About</a>
  <a href="{% url 'contact' %}" class="block text-sm font-medium text-gray-900 dark:text-white hover:text-primary">Contact</a>
  {% if request.user.is_authenticated %}
    <a href="{% url 'account_logout' %}" class="mb-5 mt-5 block text-sm font-medium text-gray-900 dark:text-white hover:text-primary transition-colors">Logout</a>
  {% else %}
    <a href="{% url 'account_login' %}" class="mb-5 mt-5 block text-sm font-medium text-gray-900 dark:text-white hover:text-primary transition-colors">Login</a>
    <a href="{% url 'account_signup' %}" class="mb-5 block text-sm font-medium text-gray-900 dark:text-white hover:text-primary transition-colors">Signup</a>
  {% endif %}


  <form action="{% url 'search' %}" class="flex items-center bg-background-light dark:bg-gray-800 rounded-lg h-10 px-3">
    <span class="material-symbols-outlined text-gray-500 dark:text-gray-400">search</span>
    <input name="q" type="search"
           class="bg-transparent border-none focus:ring-0 text-sm text-gray-900 dark:text-white ml-2 placeholder:text-gray-500 dark:placeholder:text-gray-400"
           placeholder="Search..."/>
  </form>
</div>



  
      <!-- MAIN -->
 
   
        {% if messages %}
          <div class="fixed top-4 right-4 z-50 space-y-3">
            {% for message in messages %}
              <div
                class="p-4 rounded-lg shadow-lg text-white 
                {% if message.tags == 'success' %} bg-green-500
                {% elif message.tags == 'error' %} bg-red-500
                {% elif message.tags == 'warning' %} bg-yellow-500
                {% else %} bg-blue-500
                {% endif %}
                transition-all duration-500 transform opacity-100 translate-y-0"
              >
                <div class="flex items-center justify-between">
                  <p class="font-medium">{{ message }}</p>
                  <button class="ml-3 text-white/70 hover:text-white" onclick="this.parentElement.parentElement.remove()">âœ•</button>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}
  
        {% block content %}
        {% endblock content %}

      <!-- FOOTER -->

    {% include "blog/footer.html" %}
  
    </div>


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const backdrop = document.getElementById('menu-backdrop');
  
    // Toggle menu and backdrop
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      backdrop.classList.toggle('hidden');
    });
  
    // Close menu when clicking backdrop
    backdrop.addEventListener('click', () => {
      mobileMenu.classList.add('hidden');
      backdrop.classList.add('hidden');
    });
  
    // Close menu when clicking links
    const menuLinks = mobileMenu.querySelectorAll('a');
    menuLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
        backdrop.classList.add('hidden');
      });
    });
  });
  </script>


  {{ request.tenant.id|json_script:"tenant_id" }}
  <script>
    const tenantId = JSON.parse(document.getElementById('tenant_id').textContent);
  
    fetch("/track_visit/", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        tenant_id: tenantId,
        path: window.location.pathname,
        referrer: document.referrer,
        user_agent: navigator.userAgent
      })
    });
  </script>
  

</body>

</html>
